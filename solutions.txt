import { useEffect, useMemo, useCallback, useState } from "react";
import axios from "axios";
import UserList from "./UserList";

export default function Users() {
  const [users, setUsers] = useState([]);
  const [search, setSearch] = useState("");
  const [theme, setTheme] = useState("light");

  //  Fetch data (side-effect)
  useEffect(() => {
    axios
      .get("https://jsonplaceholder.typicode.com/users")
      .then(res => setUsers(res.data));
  }, []);

  //  VALUE optimization  useMemo
  const filteredUsers = useMemo(() => {
    console.log("Filtering users...");
    return users.filter(user =>
      user.name.toLowerCase().includes(search.toLowerCase())
    );
  }, [users, search]);

  //  FUNCTION optimization  useCallback
  const selectUser = useCallback((user) => {
    console.log("Selected:", user.name);
  }, []);

  return (
    <>
      <button onClick={() => setTheme(theme === "light" ? "dark" : "light")}>
        Toggle Theme
      </button>

      <input
        placeholder="Search user"
        value={search}
        onChange={e => setSearch(e.target.value)}
      />

      <UserList users={filteredUsers} onSelect={selectUser} />
    </>
  );
}
---

import React from "react";

function UserList({ users, onSelect }) {
  console.log("UserList rendered");

  return (
    <ul>
      {users.map(user => (
        <li key={user.id} onClick={() => onSelect(user)}>
          {user.name}
        </li>
      ))}
    </ul>
  );
}

export default React.memo(UserList);
