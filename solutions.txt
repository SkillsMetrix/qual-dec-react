import axiosInstance from "./axiosInstance";


export const apiCall =(url)=> axiosInstance.get(url)


----

import { createSlice } from '@reduxjs/toolkit'

const apiSlice= createSlice({
    name: 'api',
    initialState:{
        data:[],
        loading:false
    },
    reducers:{
        apiRequest:(state)=>{
            state.loading= true
        },
        apiSuccess:(state,action) =>{
            state.data=action.payload
            state.loading=false
        }
    }
})
export const {apiRequest,apiSuccess}=apiSlice.actions
export default apiSlice.reducer;

----

import axios from "axios";
const axiosInstance= axios.create({
    baseURL:'https://jsonplaceholder.typicode.com',
    timeout: 5000

})
export default axiosInstance

----

import { apiCall } from "./apiService";
import { apiRequest, apiSuccess } from "./apiSlice";
import { call, put, takeLatest } from 'redux-saga/effects'

function* handleApi(action){
    const response= yield call (apiCall,action.payload)
    yield put(apiSuccess(response.data))
}
export default function* rootSaga(){
    yield takeLatest(apiRequest.type,handleApi)
}

------
import createSagaMiddleware from 'redux-saga'
import { configureStore } from '@reduxjs/toolkit'
import apiReducer from './apiSlice'
import rootSaga from './sagaApp'
const sagaMiddleware= createSagaMiddleware()

const store= configureStore({
    reducer:{
        api:apiReducer
    },
    middleware:(gdm) =>gdm({thunk:false}).concat(sagaMiddleware)
})
sagaMiddleware.run(rootSaga)


export default store
