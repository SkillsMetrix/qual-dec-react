
import axios from 'axios'
import { createAsyncThunk, createSlice } from '@reduxjs/toolkit'
import { createAPIThunk } from './createAPIThunk';
import { getPosts } from './postAPI';

export const fetchUsers= createAPIThunk(
    "posts/fetchposts",
     getPosts
)
export const fetchUsersSlice= createSlice({
    name:"posts",
    initialState:{
        list:[],
        loading:false,
        error:null
    },
    reducers:{},
    extraReducers:(builder)=>{
        builder
        .addCase(fetchUsers.pending,(state) =>{
            state.loading= true
        })
        .addCase(fetchUsers.fulfilled,(state,action) =>{
            state.loading=false
            state.list=action.payload
        })
    }
})
export default fetchUsersSlice.reducer

---------


import { createAsyncThunk } from "@reduxjs/toolkit"


export const createAPIThunk= (type,apiCall) =>{

    createAsyncThunk(type,async(_,{rejectWithValue})=>{
        try {
            const response= await apiCall()
            return response.data
        }catch(error){
            return rejectWithValue(error.message)
        }
    })
}

-----------


import appClient from "../apiClient"


export const getPosts=()=>{
    return appClient.get('/users')
}


--------

import axios from "axios";
const appClient= axios.create({
    baseURL:'https://jsonplaceholder.typicode.com',
    timeout: 5000

})
export default appClient
